<!DOCTYPE html>
<html>
   <head>
      <title>Redux basic example</title>
      <script src="https://unpkg.com/redux@latest/dist/redux.min.js"></script>
   </head>
   <body>
      <div>
        Clicked: <span id="value">0</span> times
        <button id="increment">+</button>
        <button id="decrement">-</button>
        <button id="increment-10">Adiciona 10</button>
      </div>
      <script>

        // Formato da action
        // {
        //   type: 'ADD_TASK',
        //   payload: {
        //     text: 'Dar aula de Redux'
        //   }
        // }

        // {
        //   type: 'COMPLETE_TASK',
        //   payload: {
        //     text: 'Dar aula de Redux'
        //   }
        // }


        // o reducer é uma função que retorna o novo valor do meu estado global
        // a partir de uma action

        function counterReducer(state = 0, action) {
          switch(action.type) {
            case 'INCREMENT': 
              // state = state + 1 ❌
              return state + action.payload.amount;
            case 'DECREMENT': 
              return state - 1;
            default:
              return state;
          }
        }

        // Criar a store passando o counterReducer
        const store = Redux.createStore(
          counterReducer,
          window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()
        );

        document
          .querySelector('#increment')
          .addEventListener('click', () => {
            const incrementAction = {
              type: 'INCREMENT',
              payload: {
                amount: 1,
              }
            }

            store.dispatch(incrementAction);
          })
        
        document
          .querySelector('#decrement')
          .addEventListener('click', () => {
            const decrementAction = {
              type: 'DECREMENT',
            }

            store.dispatch(decrementAction);
          })

        document
          .querySelector('#increment-10')
          .addEventListener('click', () => {
            const increment10Action = {
              type: 'INCREMENT',
              payload: {
                amount: 10
              }
            }

            store.dispatch(increment10Action);
          })

        // pede os dados e atualiza a página
        store.subscribe(() => {
          document.querySelector('#value').innerHTML = store.getState();
        });
      </script>
   </body>
</html>